extends ../layout/index.pug

block title
  title Profile
block content
    section(class="wp-2")
      form(action=profile && '/admin/profile/update' || '/admin/profile/crear',
           method='post',
           enctype="multipart/form-data")
        if profile
          input(type="hidden", value=profile.id, name="id")
        div(class="row wm-0-imp")
          div(class="input-field col s12 wm-0")
            input(name="name", placeholder="Name", type="text", value=profile && profile.name)
          div(class="input-field col s12 wm-0")
            input(name="lastname", placeholder="Lastname", type="text", value=profile && profile.lastname)
          div(class="input-field col s12 wm-0")
            input(name="description", placeholder="Description", 
                  type="text", value=profile && profile.description)
          div(class="input-field col s12 wm-0")
            textarea(name="about_me", id="about_me", placeholder="About me", 
                     class="materialize-textarea")
              if profile && profile.about_me
                |#{profile.about_me}
          div(class="input-field col s12 wm-0")
            input(name="email", placeholder="Email", 
                  type="email", value=profile && profile.email)
          div(class="input-field col s12 wm-0")
            input(name="phone", placeholder="Phone", 
                  type="text", value=profile && profile.phone)
          div(class="input-field col s12 wm-0")
            input(name="facebook", placeholder="Profile facebook", 
                  type="text", value=profile && profile.facebook)
          div(class="input-field col s12 wm-0")
            input(name="histagram", placeholder="Profile histagram", 
                  type="text", value=profile && profile.histagram)
          div(class="input-field col s12 wm-0")
            input(name="twitter", placeholder="Profile twitter", 
                  type="text", value=profile && profile.twitter)
          div(class="input-field col s12 wm-0")
            input(name="linkedin", placeholder="Profile linkedin", 
                  type="text", value=profile && profile.linkedin)
          div(class="input-field  col s12 wm-0")
            p
              input(type="checkbox", name="active", id="active", class="filled-in"
                    checked=profile && profile.active == 'on')
              label(for="active") Active
          div(class="file-field input-field col s12 wm-0 wm-t-imp-30")
            div(class="btn")
              span Image
              input(type="file", name="picture")
            div(class="file-path-wrapper")
              input(class="file-path validate", type="text", placeholder="Upload image")
          
          if profile && profile.picture
            div(class="col s12 mt-t-30") Current picture |
              a(href='/' + profile.picture, target="_blank")| image #{profile.picture}
            
          
          div(class="col s12 wm-t-30 right-align")
            button(class="btn waves-effect waves-light", type="submit", name="action") Send
          
          if success == true
            div(class="col s12  center-align wm-t-imp-20")
              p(class="green white-text center br-5 wp-1")| Register save with success
              
          if success == false
            div(class="col s12  center-align wm-t-imp-20")
              p(class="red white-text center br-5 wp-1")| The following errors were generated 
              if errors
                each val in errors
                  p| The field is required #{val.field}
              if message
                p|#{message}
block javascript
  script(type="application/javascript", src="/bundles/profile.bundle.js")
                
